<link rel="stylesheet" href="/css/site.css" />

<div>
    <h3>@DateTime.Now.ToString("MMMM dd, yyyy")</h3>

    <div class="finishing-buttons">
        <button class="book-button" @onclick="ShowPatientModal">Squeeze In</button>
        <button class="book-button">Change</button>
        <button class="delete-apt-button">Delete</button>
    </div>
</div>


@if (showPatientModal)
{
    <div class="modal-container">
        <div class="modal-background">
            <div class="modal-content">
                <ThePatientModal OnTopCancelClicked="HidePatientModal" Month="@Month" Day="@Day" Year="@Year"
                    TimeInString="@TimeInString" />
            </div>
        </div>
    </div>
}

<style>
    .delete-apt-button {
        background-color: #d02222;
        float: right;
        border: none;
        color: #eaeaea;
        padding: 10px;
        width: auto;
        height: 37px;
        text-align: center;
        cursor: pointer;
        border-radius: 5px;
        margin: 5px;
        line-height: 19px;
        transition: background-color 0.3s, color 0.3s;
    }

    .delete-apt-button:hover {
        background-color: #6a0909;
        color: #fff;
    }


    h3 {
        font-size: 16px;
        font-weight: bold;
        margin-top: 10px;
        color: #333;
        background-color: #f0f0f0;
        padding: 5px;
        border-radius: 5px;
        text-align: center;
        transition: background-color 0.3s, color 0.3s;
    }

    .centered-appointment-section {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100%;
        height: calc(100% - 60px);
    }

    .appointment-section {
        background-color: #f0f0f0;
        width: 30vw;
        height: 67vh;
        overflow-y: auto;
        padding: 10px;
        border-radius: 5px;
    }

    .book-button {
        background-color: #f0f0f0;
        border: none;
        color: #333;
        padding: 10px;
        width: auto;
        height: 37px;
        text-align: center;
        cursor: pointer;
        border-radius: 5px;
        margin: 5px;
        line-height: 19px;
        transition: background-color 0.3s, color 0.3s;
    }

    .book-button:hover {
        background-color: #666;
        color: #fff;
    }

    .finishing-buttons {
        margin-top: 10px;
    }

    .close-button {
        background-color: #262624;
        color: white;
        margin-left: 20px;
    }

    .modal-content {
        width: 88%;
        height: 80%;
        margin: 0 auto;
    }
</style>

@code {
    [Parameter]
    public DateTime SelectedTime { get; set; }

    [Parameter] public string Month { get; set; }
    [Parameter] public string Day { get; set; }
    [Parameter] public string Year { get; set; }
    [Parameter] public string TimeInString { get; set; }

    private bool showConfirmAppointmentModal = false; // likely needs to be in ThePatient and ThePatientModal
    private bool showPatientModal = false;

    private (int, int) selectedTime;

    private void ShowPatientModal()
    {
        showPatientModal = true;
    }

    private void HidePatientModal()
    {
        showPatientModal = false;
    }

    private void HandleSave()
    {
        showConfirmAppointmentModal = false;
    }

    private void HandleCancel()
    {
        showConfirmAppointmentModal = false;
    }

    private void HandleAppointmentRowClick()
    {
        Console.WriteLine(selectedTime);
    }
}